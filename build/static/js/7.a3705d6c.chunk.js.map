{"version":3,"sources":["assets/imgs/bus2.png","assets/imgs/station.png","assets/imgs/cir.png","components/list/index.jsx","pages/search/index.jsx","tool/http.js","tool/api/real_bus.js","tool/location.js","components/searchBar/index.jsx","assets/imgs/search.png"],"names":["List","_changePage","id","type","mylocation","props","history","push","pathname","state","log","longitude","lat","latitude","lineId","listBus","this","map","item","className","onClick","e","lineType","src","cir","alt","station","bus2","name","country","Component","connect","locationCity","dispatch","one","number","CITY","data","withRouter","Search","_returndata","value","a","params","userId","keyword","searchList","code","filter","setState","lineBus","location","lineImg","text","img","returnback","source","length","post","url","head","Promise","resolve","reject","axios","then","res","catch","err","defaults","baseURL","timeout","interceptors","request","use","config","error","response","console","header","headers","qs","stringify","selectLineCars","lineSiteCarsParams","nearSites","recommendLine","selectSiteDetails","AMap","window","_getLocationAMap","callback","mapObj","Map","plugin","geolocation","Geolocation","enableHighAccuracy","maximumAge","convert","showButton","buttonPosition","buttonOffset","Pixel","showMarker","showCircle","panToLocation","zoomToAccuracy","addControl","getCurrentPosition","event","addListener","position","lng","addressComponent","district","province","alert","debounce","fun","delay","args","that","_args","clearTimeout","setTimeout","call","his_coll","title","flag","cityLocation","city","Searchbar","_changeData","nativeEvent","placeholder","onChange"],"mappings":"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","file":"static/js/7.a3705d6c.chunk.js","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAASCAYAAACEnoQPAAACI0lEQVQ4T42TP2hTURTGv+++JK8tmJIHRRzMIOhgwcWA4GRBBBs3QVEUis6KILgKjuIgziKKpWDmqpAIdXAQLHaqODm0g0IwCUpM0/fe/eQ8+qqGQD3D4/55v3O+c+45bDQawfT0dNU5dxpAzXtfJVkGUCIJSQCwLemHc27DOffBOfem3W5vstlszgO4T/KIpMAAANlnxGSOSKYAPpO8w1artSbpGEk3Bhh7JMkDWLPI5uk7yS+SbL1rzjl4b//9MZKBpEMkI4tsSTXTNF0Iw3DQ7/fHSd6ly+XyxHA4fArgTA4vVyqVi7Va7dde0ldXV6e63e4LAOcyWNLLKIou/C/c6XQaJOs5/LpYLF5ut9tZ5NnZ2UzA+vr6P2s7m5mZmYrjeInk2Vz2J0lPJMV7ySZZJHkNwNEcTgAYmHXEHmYFLQIo5LBBwx3ILoIxDuwZc2WhNVIO/wTwnORHSfcA7B9xkJL8BuCupOMkr0jal8Pv0zSth2G4nSTJAoAHAMx7bkNJt3u93rMoikJ7HQAnDDYpG+YtCILNOI4fAaiTLOWkpG0Ay0EQ3JRUlbQIoGrwWwAnAXwFsEXyoKSJkeEQyS1JmwDs7gDJdwafB7C0M4IDSfbWVsC/2zTbk5ySNGkjCuCSwadIvpKU5eKcu5UkyWC02oVCYdJ7/zDrLNJqMG9TdZik5Vlxzj12zi3Ozc1tjcIrKysT3vur3vvr3vtuqVS68RvR7xrp/IRmUgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAjCAYAAACD1LrRAAABiUlEQVRYR+2WvUoDQRDHZ8ZDMIe1+CASxSq4d2cjWIofL2AjQfzotPQDBStfIGAtFrm93TaIQl7A1sZXEC47shHMJcTLGdykue0OZue385//7B4CADSbzSXP80IA8Oy3w5UaY+IoitoopawSUQsAZhwCs6ktfBmVUmcAcM7MT0T07BJujFlBxA3Ly4K3wzB8cAmWUm4RkWX0gffCMGxordeNMXODB0BEMsa8RlH0Pu7hpJQ7RNQYClZKfQDAwi/J94MguHcCTpJkFxHnh1SMAKCFEG//DZ5ajxUivthejltR3j5mNsxcRcSgr8cuYDk5e64uwY4VKKV2LHAv/XSlrgPA7cRq/QbV7Y+AT0SPALA2IXji+/6mvfi7K47jxU6nM5sH9zzPIOIhIh5k45j5jplv0jTNvW4rlcpnrVazrx/8gItWq7W+YOaTbDwiXgohTovmKMGFlCql7hqlNFcBt5RzPFKkcpwmNk5KqSsAOBroyXUQBMcj+5QJGMfVgplXB16nlhBC/wX8BeFjKd30WNSeAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAATCAYAAABPwleqAAABIklEQVQ4T9WSMS8FQRSFz50l+1qFQqVQioSESqFwJ7O/QLRa/XtUNELy8DMUSskmdmc22R+AQqeieI3nL7ydHVlZsli7WyiY6k5yv9xzTg6hw9NaHwshJsx8WF2nNtYYswXgAsAUEW0z8+U70whHUbToed4tgF4JTIhonZlviv+PcBiGM77vjwFMf1E3zvN8TSk1qoXTNO1lWfYAYL7OFhHdWWs3vsHOOUqS5BzAZgnOApgr5xcAz8XsnLtqDSyO474QYvjmkWjIzHudAiuWjDH7AE5K4FRKOfgDsNb6gIhWGsqyAGCpVrYx5hpA0Na034DPpJT9j8Cql51zO865xwYVI6XUUy1srV0OguC+owVQ9fL/go8ArJbd3WXmpsA+xfEKAW+D+gFPdwAAAAAASUVORK5CYII=\"","import React, { Component , Fragment } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport {connect} from 'react-redux'//引入redux容器组件\r\nimport { CITY } from '@/redux/city_location/variable.js'//引入reducers变量\r\nimport bus2 from '@/assets/imgs/bus2.png'\r\nimport station from '@/assets/imgs/station.png'\r\nimport cir from '@/assets/imgs/cir.png'\r\nimport './index.scss'\r\nclass List extends Component {\r\n    _changePage = (id,type) =>{\r\n        const { mylocation } = this.props\r\n        if(type==='realtime_bus'){\r\n            this.props.history.push({pathname:'/details',state:{log:mylocation.longitude,lat:mylocation.latitude,lineId:id}})\r\n        }\r\n    }\r\n    render() {\r\n        const { listBus } = this.props\r\n        return (\r\n            <Fragment>\r\n                {\r\n                    listBus.map(item=>{\r\n                        return (\r\n                            <div className=\"list\" key={item.id} onClick={e=>this._changePage(item.id,item.lineType)}>\r\n                                <div className=\"list_left\">\r\n                                   { item.type==='line'?<img src={cir} alt=\"\"/>:item.type==='site'?<img src={station} alt=\"\"/>\r\n                                   :<img src={bus2} alt=\"\"/>}\r\n                                </div>\r\n                                <div className=\"list_right\">\r\n                                    <span>{item.name}</span>\r\n                                    <span className=\"right_span\">{item.country}</span>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\nexport default connect(\r\n    (state)=>({mylocation:state.locationCity}),\r\n    (dispatch)=>({\r\n        one:(number)=>{\r\n            dispatch({type:CITY,data:number})\r\n        }\r\n    })\r\n)(withRouter( List ))\r\n","import React, { Component } from 'react'\r\nimport Searchbar from '@/components/searchBar/index'\r\nimport List from '@/components/list/index'\r\nimport bus2 from '@/assets/imgs/bus2.png'\r\nimport station from '@/assets/imgs/station.png'\r\nimport cir from '@/assets/imgs/cir.png'\r\nimport { searchList } from '@/tool/api/real_bus.js'\r\n// import { Toast } from 'antd-mobile';\r\nimport './index.scss'\r\nexport default class Search extends Component {\r\n   constructor(props){\r\n       super(props)\r\n       const { log,lat } = props.location.state\r\n       this.state={\r\n           lineBus:[],\r\n           lineImg:[\r\n               {id:0,text:'线路',img:bus2},\r\n               {id:1,text:'车站',img:station},\r\n               {id:2,text:'地点',img:cir}],\r\n           log:log,\r\n           lat:lat\r\n       }\r\n   }\r\n    _returndata= async ( value )=>{\r\n        let { log , lat } = this.state\r\n        let params = {\r\n            userId: 'osxt55ExUUB53CVwvZ3v2h0xwAPw',\r\n            keyword: value,\r\n            longitude: log,\r\n            latitude: lat}\r\n        let {data,code} = await searchList(params)\r\n        if(code!==200) return\r\n        data=data.filter(item=>item.lineType==='realtime_bus')\r\n        this.setState({\r\n            lineBus:data\r\n        })\r\n    }\r\n    _changePage = (lineId)=>{\r\n        this.props.history.push({pathname:'/details',state:{lineId}})\r\n    }\r\n    render() {\r\n        const { lineBus , lineImg } = this.state\r\n        return (\r\n            <div className=\"search\">\r\n                <Searchbar returnback={this._returndata} source={false}></Searchbar>\r\n                {\r\n                    lineBus.length\r\n                    ?<div className=\"search_list\">\r\n                        <div className=\"list_top\">搜索结果</div>\r\n                        <List listBus={lineBus}></List>\r\n                    </div>\r\n                    :<div className=\"search_null\">\r\n                        <div className=\"null_text\">您可以搜索</div>\r\n                        <div className=\"null_img\">\r\n                            {\r\n                                lineImg.map( item =>{\r\n                                    return (\r\n                                        <div className=\"img_line\" key={item.id}>\r\n                                            <img src={item.img} alt=\"\"/>\r\n                                            <span>{item.text}</span>\r\n                                        </div>\r\n                                    )\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import axios from 'axios'; // 引入axios\r\n\r\n\r\naxios.defaults.baseURL = 'https://www.cqjyt.top:8111';\r\n\r\naxios.defaults.timeout = 10000;//超时时间\r\n\r\n\r\n// 请求拦截器\r\naxios.interceptors.request.use(    \r\n    config => {          \r\n        return config;  \r\n    },    \r\n    error => {        \r\n        return Promise.error(error);    \r\n    }\r\n)\r\n\r\n// 响应拦截器\r\naxios.interceptors.response.use( res=>{\r\n    if(res.code===200){\r\n        return Promise.resolve(res);\r\n    }else{\r\n        return Promise.resolve(res);\r\n        \r\n    }\r\n},err=>{\r\n    console.log(err);\r\n})\r\nexport function get(url, params){   \r\n    return new Promise((resolve, reject) =>{        \r\n        axios.get(`${url}`).then(res => {\r\n            resolve(res.data);\r\n        }).catch(err =>{\r\n            reject(err.data)        \r\n    })    \r\n});}\r\nexport function post(url, params,head) {\r\n    return new Promise((resolve, reject) => {\r\n         axios.post(url, params,head)\r\n        .then(res => {\r\n            resolve(res.data);\r\n        })\r\n        .catch(err =>{\r\n            reject(err.data)\r\n        })\r\n    });\r\n}","import { post } from '@/tool/http.js'\r\nimport qs from 'qs'\r\nconst header={headers: {'Content-Type': 'application/x-www-form-urlencoded'}}\r\n// 搜索列表\r\nexport const searchList = params => post('/travelApp/busLineSite/searchList',qs.stringify(params),header)\r\n\r\n// 实时公交\r\nexport const selectLineCars = params =>post(`/travelApp/busLineSite/selectLineCars/${params.userId}`,params.lineSiteCarsParams)\r\n\r\n// 线路附近站点列表\r\nexport const nearSites = params => post('/travelApp/busLineSite/nearSites',qs.stringify(params),header)\r\n\r\n// 推荐线路\r\nexport const recommendLine = params =>post(`/travelApp/busLineSite/recommendLine`,qs.stringify(params),header)\r\n\r\n// 地点详情\r\nexport const SiteDetails = params =>post('/travelApp/busLineSite/selectSiteDetails',params)\r\n\r\n// 车辆相信信息\r\nexport const selectSiteDetails = params =>post('/travelApp/busLineSite/selectLineDetails',qs.stringify(params))","const AMap = window.AMap;\r\n\r\n\r\nexport function _getLocationAMap(callback){\r\n  const mapObj = new AMap.Map('iCenter');\r\n  mapObj.plugin('AMap.Geolocation', function () {\r\n    let geolocation = new AMap.Geolocation({\r\n        enableHighAccuracy: true,//是否使用高精度定位，默认:true\r\n        timeout: 10000,          //超过10秒后停止定位，默认：无穷大\r\n        maximumAge: 0,           //定位结果缓存0毫秒，默认：0\r\n        convert: true,           //自动偏移坐标，偏移后的坐标为高德坐标，默认：true\r\n        showButton: true,        //显示定位按钮，默认：true\r\n        buttonPosition: 'LB',    //定位按钮停靠位置，默认：'LB'，左下角\r\n        buttonOffset: new AMap.Pixel(10, 20),//定位按钮与设置的停靠位置的偏移量，默认：Pixel(10, 20)\r\n        showMarker: true,        //定位成功后在定位到的位置显示点标记，默认：true\r\n        showCircle: true,        //定位成功后用圆圈表示定位精度范围，默认：true\r\n        panToLocation: true,     //定位成功后将定位到的位置作为地图中心点，默认：true\r\n        zoomToAccuracy:true      //定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false\r\n    });\r\n      mapObj.addControl(geolocation);\r\n      geolocation.getCurrentPosition();\r\n      AMap.event.addListener(geolocation, 'complete', (e)=>{\r\n        const { lat,lng } = e.position\r\n        const { district,province }=e.addressComponent\r\n        if (typeof callback == \"function\") {\r\n          callback({ latitude: lat , longitude: lng, district:district , province:province});\r\n        }\r\n      });//返回定位信息\r\n      AMap.event.addListener(geolocation, 'error', ()=>{\r\n        alert('定位出错')\r\n      });      //返回定位出错信息\r\n  });\r\n}\r\n// 判断是否是微信浏览器\r\nexport const isWeiXin = () => {\r\n  let ua = window.navigator.userAgent.toLowerCase();\r\n  if (ua.match(/MicroMessenger/i) === \"micromessenger\") {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n//浏览器原生获取经纬度方法\r\nexport const latAndLon = (callback, error) => {\r\n  if (navigator.geolocation) {\r\n    navigator.geolocation.getCurrentPosition(\r\n      (position) => {\r\n        let latitude = position.coords.latitude;\r\n        let longitude = position.coords.longitude;\r\n        let data = {\r\n          latitude: latitude,\r\n          longitude: longitude,\r\n        };\r\n        if (typeof callback == \"function\") {\r\n          callback(data);\r\n        }\r\n      },\r\n      () => {\r\n        if (typeof error == \"function\") {\r\n          error();\r\n        }\r\n      }\r\n    );\r\n  } else {\r\n    if (typeof error == \"function\") {\r\n      error('浏览器不支持navigator.geolocation定位');\r\n    }\r\n  }\r\n};\r\n\r\nexport const debounce = (fun, delay) => {\r\n  //搜索时的方法\r\n  return function (args) {\r\n    let that = this;\r\n    let _args = args;\r\n    clearTimeout(fun.id);\r\n    fun.id = setTimeout(function () {\r\n      fun.call(that, _args);\r\n    }, delay);\r\n  };\r\n};\r\n\r\nexport const his_coll = [\r\n  //首页三模块的显示\r\n  { id: 1, title: \"推荐线路\", flag: 1 },\r\n  { id: 2, title: \"历史\", flag: 2 },\r\n  { id: 3, title: \"收藏\", flag: 3 },\r\n];\r\n\r\nexport const cityLocation = [\r\n  //区县数据的数组\r\n  { city: \"万州区\", code: \"500101\" },\r\n  { city: \"酉阳土家族苗族自治县\", code: \"500242\" },\r\n  { city: \"铜梁区\", code: \"500151\" },\r\n  { city: \"秀山土家族苗族自治县\", code: \"500241\" },\r\n  { city: \"梁平区\", code: \"500155\" },\r\n  { city: \"安岳县\", code: \"512021\" },\r\n  { city: \"大渡口区\", code: \"500104\" },\r\n  { city: \"合川区\", code: \"500117\" },\r\n  { city: \"开州区\", code: \"500154\" },\r\n  { city: \"石柱土家族自治县\", code: \"500240\" },\r\n  { city: \"黔江区\", code: \"500114\" },\r\n  { city: \"丰都县\", code: \"500230\" },\r\n  { city: \"巫溪县\", code: \"500238\" },\r\n  { city: \"奉节县\", code: \"500236\" },\r\n  { city: \"潼南区\", code: \"500152\" },\r\n  { city: \"綦江区\", code: \"500110\" },\r\n  { city: \"云阳县\", code: \"500235\" },\r\n  { city: \"涪陵区\", code: \"500102\" },\r\n  { city: \"彭水苗族土家族自治县\", code: \"500243\" },\r\n  { city: \"城口县\", code: \"500229\" },\r\n  { city: \"璧山\", code: \"500120\" },\r\n  { city: \"忠县\", code: \"500233\" },\r\n  { city: \"长寿\", code: \"500115\" },\r\n  { city: \"大足\", code: \"500111\" },\r\n  { city: \"武隆\", code: \"500156\" },\r\n  { city: \"巫山县\", code: \"500237\" },\r\n  { city: \"綦江万盛经开区\", code: \"500110\" },\r\n  { city: \"渝北区\", code: \"500112\" },\r\n  { city: \"北碚区\", code: \"500109\" },\r\n];\r\n","import React, { Component } from 'react'\r\nimport {connect} from 'react-redux'//引入redux容器组件\r\nimport { withRouter } from 'react-router-dom'\r\nimport { CITY } from '@/redux/city_location/variable.js'//引入reducers变量\r\nimport { debounce } from '@/tool/location.js'\r\nimport search from '@/assets/imgs/search.png'\r\nimport './index.scss'\r\nclass Searchbar extends Component {\r\n    _changePage = () => {\r\n        const { source ,mylocation } = this.props\r\n        if( !source ) return \r\n        this.props.history.push({pathname:'/search',state:{log:mylocation.longitude,lat:mylocation.latitude}})\r\n    }\r\n    _changeData = (e) => {\r\n        const { data } = e.nativeEvent\r\n        this.props.returnback(data)\r\n    }\r\n    render() {\r\n        const { source } = this.props\r\n        return (\r\n            <div className=\"index_search\">\r\n                <div className=\"search_box\" onClick={this._changePage}>\r\n                    {source?<span>公交</span>:''}\r\n                    <img src={search} alt=\"\" />\r\n                    {\r\n                        source\r\n                        ?<div>输入公交线路、车站、地点</div>\r\n                        :<input \r\n                            type=\"text\" \r\n                            placeholder=\"输入公交线路、车站、地点\"\r\n                            onChange={debounce(this._changeData,500)}\r\n                            ></input>\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    (state)=>({mylocation:state.locationCity}),\r\n    (dispatch)=>({\r\n        one:(number)=>{\r\n            dispatch({type:CITY,data:number})\r\n        }\r\n    })\r\n)(withRouter( Searchbar ))","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAQCAYAAADNo/U5AAABtklEQVQ4T42SMWhTQRjH/989iRkSimgWN4eiiEtLHEScH+9eAoVKKmItb3J0qeAguOpSqoOzS4emo+buSIZXnAsuhXYSBMFAdTHW90J43ycXUimFmnzTHd//d9//f3eEU2WMWVBKrYnILQCBiPwEYABsaa2HJ1Lyi3a7XapWq28BtAC8F5FPzPxbKXUDwCMAV0TkQRzHe14/hqy1O0R0mZlXtNZHp6dP+k9E5FUQBPfCMNwn59xDZn4ZBMFiGIbHZ4GTvbX2mXcSRdFtD+2JyOsoinbOAyYRgkql8oWI1sgYMyyK4lKz2fzzP8j3nHPvmPmHh4601rVpwCTbcwDXyFo77Pf7c0mS5NNAY8wmEWUeOmTm9TiOP06BvPbAa/1FPBWR1Vqtdqder4/OA51ziYi8KJfL1ylN0wtZlu0S0ffBYPC41WplZ8FOp9NQSm0VRbHUaDTS8eP2er250WjUJqJ5Zn7DzLvMfFwqlW4CWAWwLCIbWuv1fz9icrL3fJ+IEmZeIKKLIvINwAci+gpgU0Tuaq0/jyfNUtbaDQBLeZ4vzgz57HmepwB+zQx5N91u92pRFNt/AU/Z0g+QXeI8AAAAAElFTkSuQmCC\""],"sourceRoot":""}