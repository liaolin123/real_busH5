(this.webpackJsonpreal_time_bus=this.webpackJsonpreal_time_bus||[]).push([[5],{115:function(e,t,n){},123:function(e,t,n){"use strict";n.r(t);var r=n(16),i=n.n(r),a=n(23),c=n(10),o=n(11),s=n(28),u=n(13),l=n(12),d=n(0),f=n(47),h=n(22),m=n(25),p=n(46),A=n(52),b=n(54),g=(n(115),n(3)),v=window.AMap,j=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;Object(c.a)(this,n),(r=t.call(this,e))._changeSelect=function(e,t,n){var i=r.state.siteOrder,a=n.latitude,c=n.longitude;e<i||r.setState({selectID:e,BUSname:t,destination:[parseFloat(c),parseFloat(a)]})},r._setTime=function(){var e=Object(a.a)(i.a.mark((function e(t,n,a,c){var o,s,u,l,d,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.a.show(),o=Math.ceil(1e5*Math.random()),s=[{carNum:0,lineId:t,siteOrder:n,siteRoad:1,upDown:a}],e.next=5,Object(f.d)({userid:o,lineSiteCarsParams:s});case 5:if(u=e.sent,l=u.code,d=u.data,200===l){e.next=10;break}return e.abrupt("return");case 10:b.a.remove(),h=Object(p.a)(Object(p.d)(d[0].list)[0].drawInTime),sessionStorage.setItem("busId",JSON.stringify({time:h,name:c})),r.props.history.goBack();case 14:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),r._determine=function(){var e=r.state,t=e.BUSname,n=e.destination,i=Object(s.a)(r);if(null!==t){var a=r.props.mylocation,c=a.latitude,o=a.longitude;v.plugin("AMap.Driving",(function(){var e=new v.Driving({policy:v.DrivingPolicy.LEAST_TIME}),r=[o,c];e.search(r,n,(function(e,n){var r=n.info;"OK"===r?(sessionStorage.setItem("busId",JSON.stringify({time:Object(p.a)(n.routes[0].time),name:t})),i.props.history.goBack()):alert(r)}))}))}};var o=JSON.parse(e.location.state.meroAll);return r.state={siteOrder:o.siteOrder,viewList:o.viewList,lineId:o.lineId,upDown:o.upDown,selectID:null,BUSname:null,destination:[],deskHeight:null},r}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.setState({deskHeight:document.body.clientHeight+"px"})}},{key:"render",value:function(){var e=this,t=this.props.location.state.topData,n=this.state,r=n.viewList,i=n.siteOrder,a=n.selectID,c=n.deskHeight;return Object(g.jsxs)("div",{className:"ion",style:{height:c},children:[Object(g.jsxs)("div",{className:"icon_height",children:[Object(g.jsx)(A.a,{bus:t}),Object(g.jsxs)("div",{className:"ion_con",children:[Object(g.jsxs)("div",{className:"con_top",children:[Object(g.jsx)("div",{className:"top_line"}),Object(g.jsx)("div",{className:"top_text",children:t.name})]}),Object(g.jsx)("div",{className:"con_fl",children:r.map((function(t,n){return Object(g.jsxs)("div",{className:"fl_box",children:[Object(g.jsx)("div",{className:"box_one",style:t.num<i?{backgroundColor:" #BBBBBB"}:t.num===i?{backgroundColor:"#FFB311"}:{backgroundColor:"#0090FF"},children:t.num}),Object(g.jsx)("div",{className:"box_two",style:{backgroundColor:t.color},children:Object(g.jsx)("img",{src:t.num===i?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAABC0lEQVQoU42SMUsDQRSEZy5aidzuTxACpreJbRAtTIJgZWFtFUxnGxtJKTb2YmEnuaTQwl57BVNpozbCLRYBI2bEuyhuOC5u93bme7ydfVTHHiNQGYLw93BcC/TvSYxGB1RkrkBWPHFqoSbVnS8BhVuAhan+1PCE17iYjKGuOQS4+y+Q2GI1PkvBc2Mww0cAYS5M3LAal789vw9XzzQgHuWC+lxm/e3aB1sIsGTvAJQyYemUdbf9o3lRKwpXweAyAxxg+F7k5uAlE0yDshcA1nxYLdbcvv/NE+0VhQsA+yBnU0kPeHaL3MFHLphYe7YNYS8xBtrguutMju+v01jVCeZg7T2gPmtuJSusL4VAT/h/0ZrXAAAAAElFTkSuQmCC":t.num===a?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAA7UlEQVQoU42RsU4CURREz2C2MBTwCyQk8AnSEqItrQU1FWHRwhYaYkIiqxb8gAWtHRT00EMCFTbG1srG4DULbGTXdeV1c2dO3n3zhGcD4AwwwifQisx93RV9myDKETNZClc8WpENc+DkSPiVd/K7NfrmIZpHgeKSpoYBmAVeEJl/4Bmu/D74efi9NTAeEsENJa41DYNtS5FlART/gJ9wVQu8cNV3dk6KcQz4gZGnpbd4cFfUCHERgo02LXUOZ9HPhZ7lcFgBzj645pQCdX0mg77r2S1wsw1+UeVKz9H1f9/oJ3qWxmEJrHBViSvrG5caOHf88nP2AAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAA1klEQVQoU42RMU6CQRCFvwexsoArkJDoEbQlBFtaC45AsLPVhlgaGy9gQUuHBT30mmglDeEGNBbPLNnfwLpxmW7mzZeZeSPbz8AFYA6jypXUQz6W7TnQScRSehPAc+ANqJe6o74G2rs1bD8CoyPBa0mTCmwCK6BRgJeSgh/8Hm57CDwVwEtJixSsAe9AuDkXL5IGlXBgte0e8JqhtjtDpE0WjEbNgKsEvpN0v19LnxscbgGfwEls/ALOJH3/C8apD8BtbOxLmqbr/5kYwVPgI0yW1M059QMdeD7QyXlatQAAAABJRU5ErkJggg==",alt:""})}),Object(g.jsx)("div",{className:"box_three",style:t.num<i?{color:"#8E8E8E"}:t.num===i?{color:"#D88011"}:t.num===a?{color:"#0090FF"}:{color:"#3A3A3A"},onClick:function(){return e._changeSelect(t.num,t.name,t)},children:t.name})]},n)}))})]})]}),Object(g.jsx)("div",{className:"con_fixed",onClick:function(){return e._determine()},children:"\u786e\u5b9a"})]})}}]),n}(d.Component);t.default=Object(h.b)((function(e){return{mylocation:e.locationCity,myLineData:e.recommendData}}),(function(e){return{_changeCity:function(t){e({type:m.a,data:t})}}}))(j)},46:function(e,t,n){"use strict";n.d(t,"k",(function(){return r})),n.d(t,"l",(function(){return i})),n.d(t,"m",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"j",(function(){return h})),n.d(t,"n",(function(){return m})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return A}));var r=function(e){return e.map((function(e){return{carNum:0,lineId:e.lineId,siteOrder:e.viewSort,siteRoad:0,upDown:e.upDown}}))},i=function(e){var t,n,r,i,a=e.length;for(i=e.slice(0),t=0;t<a;t++)for(n=a-1;n>t;n--)i[n].lineId<i[n-1].lineId&&(r=i[n-1],i[n-1]=i[n],i[n]=r);return i},a=function(e){if(!e.length)return[];for(var t,n,r={},i=[],a=0;a<e.length;a++)n=typeof(t=e[a].soleId),r[t]?r[t].indexOf(n)<0&&(r[t].push(n),i.push(e[a])):(r[t]=[n],i.push(e[a]));return i},c=function(e,t){for(var n=e,r=0;r<n.length;r++)Object.assign(n[r],t[r]);return n},o=function(e){for(var t=[],n=0;n<e.length;n++)-1!==e[n].drawInTime&&t.push(e[n]);return t.sort((function(e,t){return e.drawInTime-t.drawInTime}))},s=function(e){return e.map((function(e){return{flag:e.flag,soleId:e.soleId}}))},u=function(e,t){for(var n=e,r=t,i=0;i<n.length;i++)for(var a=0;a<r.length;a++)n[i].soleId===r[a].soleId&&(n[i].flag=r[a].flag);return n},l=function(e,t){var n=e;return n=n.filter((function(e){return e.soleId!==t}))},d=function(e,t){var n=[];if(!t.length)return[];for(var r=0;r<e.length;r++)for(var i=0;i<t.length;i++)e[r].soleId===t[i].soleId&&(e[r].flag=t[i].flag,n.push(e[r]));return n},f=function(e,t,n,r){var i=e*Math.PI/180,a=n*Math.PI/180,c=i-a,o=t*Math.PI/180-r*Math.PI/180,s=2*Math.asin(Math.sqrt(Math.pow(Math.sin(c/2),2)+Math.cos(i)*Math.cos(a)*Math.pow(Math.sin(o/2),2)));return s*=6378.137,s=Math.round(1e4*s)/1e4*1e3,Math.ceil(s)},h=function(e,t){for(var n=e,r=0;r<n.length;r++)for(var i=0;i<t.length;i++)n[r].viewSort===t[i].nextNum&&(n[r].busLocat=t[i]);return n};function m(e){var t=[];return function e(n){if("object"!==typeof n||!n)return n;for(var r=0;r<t.length;r++)if(t[r].target===n)return t[r].copyTarget;var i={};return Array.isArray(n)&&(i=[]),t.push({target:n,copyTarget:i}),Object.keys(n).forEach((function(t){i[t]||(i[t]=e(n[t]))})),i}(e)}var p=function(e){var t=e;return(t=t.filter((function(e){return-1!==e.drawInTime}))).sort((function(e,t){return e.drawInTime-t.drawInTime}))},A=function(e){var t=parseInt(e),n=0,r=0;t>60&&(n=parseInt(t/60),t=parseInt(t%60),n>60&&(r=parseInt(n/60),n=parseInt(n%60)));var i="".concat(parseInt(t));return n>0&&(i="".concat(parseInt(n)<10?"0".concat(parseInt(n)):parseInt(n),":").concat(i<10?"0".concat(i):i)),r>0&&(i="".concat(parseInt(r)<10?"0".concat(parseInt(r)):parseInt(r),":").concat(i<10?"0".concat(i):i)),n<=0&&r<=0&&(i="00:".concat(i<10?"0".concat(i):i)),i}},47:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return h}));var r=n(49),i=n.n(r);function a(e,t,n){return new Promise((function(r,a){i.a.post(e,t,n).then((function(e){r(e.data)})).catch((function(e){a(e.data)}))}))}i.a.defaults.baseURL="http://localhost:3000",i.a.defaults.timeout=1e4,i.a.interceptors.request.use((function(e){return e}),(function(e){return Promise.error(e)})),i.a.interceptors.response.use((function(e){return e.code,Promise.resolve(e)}),(function(e){console.log(e)}));var c=n(50),o=n.n(c),s={headers:{"Content-Type":"application/x-www-form-urlencoded"}},u=function(e){return a("/travelApp/busLineSite/searchList",o.a.stringify(e),s)},l=function(e){return a("/travelApp/busLineSite/selectLineCars/".concat(e.userId),e.lineSiteCarsParams)},d=function(e){return a("/travelApp/busLineSite/nearSites",o.a.stringify(e),s)},f=function(e){return a("/travelApp/busLineSite/recommendLine",o.a.stringify(e),s)},h=function(e){return a("/travelApp/busLineSite/selectLineDetails",o.a.stringify(e))}},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(10),i=n(11),a=n(13),c=n(12),o=n(0),s=(n(53),n(3)),u=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.bus;return Object(s.jsx)("div",{className:"header",children:Object(s.jsxs)("div",{className:"header_box",children:[Object(s.jsxs)("div",{className:"box_left",children:[Object(s.jsxs)("div",{className:"left_text",children:[e.beginSite," \u2192 ",e.endSite]}),Object(s.jsxs)("div",{children:["\u9996\u672b\u73ed ",e.beginTime,"--",e.endTime]})]}),Object(s.jsxs)("div",{className:"box_right",children:["\u7968\u4ef7",e.ticketPrice/100,"\u5143  \u652f\u6301\u6362\u4e58"]})]})})}}]),n}(o.Component)},53:function(e,t,n){},54:function(e,t,n){"use strict";var r=n(29),i=n(14),a=n.n(i),c=(n(57),n(3));function o(e){return Object(c.jsx)("div",{className:"loading-container",children:Object(c.jsx)("div",{className:"container_box",children:Object(c.jsx)("div",{className:"box_loading",children:Object(c.jsxs)("div",{className:"loading",children:[Object(c.jsx)("span",{}),Object(c.jsx)("span",{}),Object(c.jsx)("span",{}),Object(c.jsx)("span",{}),Object(c.jsx)("span",{})]})})})})}o.show=function(e){this.div=document.createElement("div"),document.body.appendChild(this.div),a.a.render(Object(c.jsx)(o,Object(r.a)({},e)),this.div)},o.remove=function(){this.div&&a.a.unmountComponentAtNode(this.div),this.div&&this.div.parentNode.removeChild(this.div)},t.a=o},57:function(e,t,n){}}]);
//# sourceMappingURL=5.72b387ac.chunk.js.map