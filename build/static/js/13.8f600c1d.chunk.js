(this.webpackJsonpreal_time_bus=this.webpackJsonpreal_time_bus||[]).push([[13],{114:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var s=a(16),n=a.n(s),r=a(23),c=a(10),i=a(11),o=a(13),l=a(12),u=a(0),m=a(22),d=a(26),j=a(46),p=a(47),h=a(27),b=a(54),f=a(74),O=a(56),g=a(76),_=a(60),v=a(61),x=a(62),N=a(75),I=(a(114),a(3)),y=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={nearSitesBus:{},mergeData:[],frame:!1,is_toast:!0,timer:null},e._getNearSites=Object(r.a)(n.a.mark((function t(){var a,s,r,c,i,o,l,u,m,d;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.mylocation,s=a.userId,r=a.city,c=a.country,i=a.latitude,o=a.longitude,l=a.province,t.next=3,Object(p.b)({range:1e3,userId:s,city:r,country:c,latitude:i,longitude:o,province:l});case 3:if(u=t.sent,m=u.code,d=u.data,200===m){t.next=8;break}return t.abrupt("return");case 8:d.forEach((function(e){e.soleId=e.lineId+e.upDown,e.ranNum=Math.random(1),e.flag=0})),e._getSelectLineCars(d);case 10:case"end":return t.stop()}}),t)}))),e._getSelectLineCars=function(){var t=Object(r.a)(n.a.mark((function t(a){var s,r,c,i,o,l,u,m,d;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(s=e.state.is_toast)&&b.a.show(),r=a,c=e.props.mylocation.userId,i=JSON.parse(localStorage.getItem("collection"))||[],o=Object(j.i)(r,i),l=Object(j.k)(o),t.next=9,Object(p.d)({userId:c,lineSiteCarsParams:l});case 9:if(u=t.sent,m=u.data,200===u.code){t.next=14;break}return t.abrupt("return");case 14:s&&b.a.remove(),d=Object(j.f)(Object(j.l)(m),Object(j.l)(o)),e.setState({mergeData:d}),e.props._changerecommend(d),e.state.is_toast=!1;case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e._changeFrame=function(t){e.setState({frame:t})},e._changeFlag=function(t){var a=e.state.frame;e.props._changeSwitchID(1),e.setState({frame:!a,soleId:t})},e._setImgDOM=function(e){return 1===e?Object(I.jsx)("img",{src:_.a,alt:""}):2===e?Object(I.jsx)("img",{src:v.a,alt:""}):3===e?Object(I.jsx)("img",{src:x.a,alt:""}):void 0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._getNearSites(),this.state.timer=setInterval((function(){e._getNearSites()}),15e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer&&this.state.timer),this.props._changerecommend([])}},{key:"render",value:function(){var e=this,t=this.state,a=t.mergeData,s=t.frame,n=t.soleId,r=this.props.location.state.name;return Object(I.jsxs)("div",{className:"platform",children:[Object(I.jsx)("div",{className:"platform_top",children:r}),Object(I.jsx)(O.a,{source:!0}),Object(I.jsx)("div",{className:"platform_main",children:a.map((function(t){return Object(I.jsxs)("div",{className:"main_box",children:[Object(I.jsxs)("div",{className:"box_left",children:[Object(I.jsxs)("div",{className:"left_top",children:[Object(I.jsx)("span",{className:"top_span",children:"\u516c\u4ea4"}),Object(I.jsx)("span",{className:"spans",children:t.lineName})]}),Object(I.jsxs)("div",{className:"left_fl",children:[Object(I.jsx)("span",{className:"top_span",children:"\u4e0b\u4e00\u7ad9"}),Object(I.jsx)("span",{className:"spans",children:t.siteName})]})]}),Object(I.jsxs)("div",{className:"box_right",children:[Object(I.jsx)(f.a,{status:t.runStauts,siteOrder:t.siteOrder,list:t.list,lineId:t.lineId}),Object(I.jsx)("div",{className:"right_line"}),Object(I.jsx)("div",{className:"right_img",onClick:function(){return e._changeFlag(t.soleId)},children:t.flag?e._setImgDOM(t.flag):Object(I.jsx)("img",{src:N.a,alt:""})})]})]},t.ranNum)}))}),s?Object(I.jsx)(g.a,{soleId:n,changeFeame:this._changeFrame}):""]})}}]),a}(u.Component);t.default=Object(m.b)((function(e){return{mylocation:e.locationCity}}),(function(e){return{_changerecommend:function(t){e({type:d.a,data:t})},_changeSwitchID:function(t){e({type:h.a,data:t})}}}))(y)}}]);
//# sourceMappingURL=13.8f600c1d.chunk.js.map